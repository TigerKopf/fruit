# Laden der notwendigen Module für PHP-FPM und Proxy-Funktionen
# Stellen Sie sicher, dass diese Module im Apache-Image verfügbar sind
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so

# Standard DocumentRoot auf unser 'public' Verzeichnis im Container setzen
# Dieses Verzeichnis wird durch das Docker Compose Volume-Mounting mit Ihrem Host-Verzeichnis synchronisiert
DocumentRoot "/var/www/html"
<Directory "/var/www/html">
    # Erlaubt .htaccess-Dateien für URL-Rewriting, Authentifizierung etc.
    # Dies ist nützlich für Frameworks oder benutzerdefinierte Regeln.
    AllowOverride All
    # Erlaubt Zugriff für alle Anfragen
    Require all granted
</Directory>

# Definiert die Reihenfolge der Dateien, die bei einem Verzeichniszugriff gesucht werden.
# index.php wird vor index.html bevorzugt.
DirectoryIndex index.php index.html

# PHP-FPM Konfiguration: Leitet alle Anfragen für .php-Dateien an den PHP-FPM-Dienst weiter.
# 'php' ist der Hostname des PHP-FPM-Dienstes, wie er in Ihrer docker-compose.yml definiert ist.
# Port 9000 ist der Standard-FPM-Port.
<FilesMatch \.php$>
    SetHandler "proxy:fcgi://php:9000"
</FilesMatch>

# Fehler- und Zugriffslogs in die Standardausgabe (stdout/stderr) schreiben,
# damit sie von Docker gesammelt und angezeigt werden können.
ErrorLog /proc/self/fd/2
CustomLog /proc/self/fd/1 combined

# Server-Name setzen, um Warnungen beim Apache-Start zu vermeiden.
# Kann auf Ihren tatsächlichen Domainnamen gesetzt werden, aber localhost ist für lokale Entwicklung in Ordnung.
ServerName localhost